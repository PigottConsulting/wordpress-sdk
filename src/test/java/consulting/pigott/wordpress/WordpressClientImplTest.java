package consulting.pigott.wordpress;

import consulting.pigott.wordpress.authentication.AuthenticationProvider;
import consulting.pigott.wordpress.config.Config;
import consulting.pigott.wordpress.model.Post;
import org.apache.hc.client5.http.classic.HttpClient;
import org.apache.hc.core5.http.ClassicHttpRequest;
import org.apache.hc.core5.http.io.HttpClientResponseHandler;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.runners.MockitoJUnitRunner;

import java.io.IOException;
import java.net.URISyntaxException;
import java.util.*;

import static org.junit.Assert.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertNotEquals;
import static org.mockito.Matchers.any;
import static org.mockito.Mockito.when;

@RunWith(MockitoJUnitRunner.class)
public class WordpressClientImplTest {

    private WordpressClientImpl wordpressClient;

    private Config config;

    @Mock
    private HttpClient mockHttpClient;
    @Mock
    private AuthenticationProvider mockAuthenticationProvider;
    @Mock
    private Post mockPost;

    @Before
    public void setup() {
        wordpressClient = null;
        try {
            config = Config.builder().scheme("https").host("localhost").build();
            wordpressClient = new WordpressClientImpl(config, mockAuthenticationProvider);
            wordpressClient.setHttpClient(mockHttpClient);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Test
    public void testWordpressClientImplConstructor() {
        assertNotNull(wordpressClient);
    }

    @Test
    public void testWordpressClientImplGetAllPostsNoQueryParams() {
        try {
            when(mockHttpClient.execute(any(ClassicHttpRequest.class), any(HttpClientResponseHandler.class))).thenReturn("[{\"id\":461,\"date\":\"2020-07-07T20:58:45\",\"date_gmt\":\"2020-07-07T20:58:45\",\"guid\":{\"rendered\":\"http:\\/\\/15.223.120.250\\/?p=461\"},\"modified\":\"2020-07-09T23:53:01\",\"modified_gmt\":\"2020-07-09T23:53:01\",\"slug\":\"device-essentials-def-channel-content-catalog\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/2020\\/07\\/07\\/device-essentials-def-channel-content-catalog\\/\",\"title\":{\"rendered\":\"Device Essentials (DEF) Channel Content Catalog\"},\"content\":{\"rendered\":\"\\n<p>TechInsights&#8217; DEF subscription channel back catalog now contains over 200 DEF reports on 31 manufacturers as listed\\/charted. The vendors aren&#8217;t targeted per se; these reports were published in response to a market need for competitive technical intelligence of successful and disruptive products.  Most parts for analysis are sourced from marquee products so our users can understand the enabling technologies of what&#8217;s inside winning products so it&#8217;s perhaps not surprising the profile of our content catalog is generally aligned with the leaders in market share. <\\/p>\\n\\n\\n\\n<div class=\\\"wp-block-group\\\"><div class=\\\"wp-block-group__inner-container\\\">\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-479x1024.png\\\" alt=\\\"DEF Catalog Target Vendor\\\" class=\\\"wp-image-484\\\" width=\\\"359\\\" height=\\\"768\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-479x1024.png 479w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-140x300.png 140w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6.png 481w\\\" sizes=\\\"(max-width: 359px) 100vw, 359px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Vendor<\\/strong><\\/figcaption><\\/figure><\\/div>\\n<\\/div><\\/div>\\n\\n\\n\\n<figure class=\\\"wp-block-image size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3.png\\\" alt=\\\"DEF Catalog Target Vendor\\\" class=\\\"wp-image-475\\\" width=\\\"580\\\" height=\\\"418\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3.png 878w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3-300x217.png 300w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3-768x555.png 768w\\\" sizes=\\\"(max-width: 580px) 100vw, 580px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Vendor<\\/strong><\\/figcaption><\\/figure>\\n\\n\\n\\n<p>The entirety of the scope of applications the DEF catalog covers is represented in list\\/chart form. The DEF subscription channel is entering its eighth year and indeed &#8216;what&#8217;s hot&#8217; has changed over that time.  The heavy presence of Japanese digital cameras, representing the 2nd overall ranking in our catalog, represents coverage of the great DSLR and mirrorless camera products of the past.  Smartphone\\/mobile\\/small pixel array imaging continues to hold its #1 spot and will likely continue to do so as these high volume sensors tend to leverage the most advanced manufacturing technologies.  One quarter of our DEF catalog is comprised of automotive, security, and machine vision applications and we do expect the contribution from these sub-sectors to increase going forward. 3D\\/depth sensing is the biggest mover of late and we do expect that application space to eventually take over #2 spot in our catalog.   <\\/p>\\n\\n\\n\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app.png\\\" alt=\\\"DEF Catalog Target Application\\\" class=\\\"wp-image-482\\\" width=\\\"445\\\" height=\\\"335\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app.png 593w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app-300x226.png 300w\\\" sizes=\\\"(max-width: 445px) 100vw, 445px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Application<\\/strong><\\/figcaption><\\/figure><\\/div>\\n\\n\\n\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1.png\\\" alt=\\\"DEF Catalog Target Application\\\" class=\\\"wp-image-483\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1.png 846w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1-300x219.png 300w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1-768x560.png 768w\\\" sizes=\\\"(max-width: 846px) 100vw, 846px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Application<\\/strong><br><\\/figcaption><\\/figure><\\/div>\\n\\n\\n\\n<p><\\/p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>TechInsights&#8217; DEF subscription channel back catalog now contains over 200 DEF reports on 31 manufacturers as listed\\/charted. The vendors aren&#8217;t targeted per se; these reports were published in response to a market need for competitive technical intelligence of successful and disruptive products. Most parts for analysis are sourced from marquee products so our users can [&hellip;]<\\/p>\\n\",\"protected\":false},\"author\":5,\"featured_media\":0,\"comment_status\":\"closed\",\"ping_status\":\"closed\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":[],\"categories\":[2],\"tags\":[4,6],\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/types\\/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/comments?post=461\"}],\"version-history\":[{\"count\":1,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\\/revisions\"}],\"predecessor-version\":[{\"id\":494,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\\/revisions\\/494\"}],\"wp:attachment\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/media?parent=461\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories?post=461\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags?post=461\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":5,\"name\":\"Ray Fontaine\",\"url\":\"\",\"description\":\"\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/author\\/rfontainetechinsights-com\\/\",\"slug\":\"rfontainetechinsights-com\",\"avatar_urls\":{\"24\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=24&d=mm&r=g\",\"48\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=48&d=mm&r=g\",\"96\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=96&d=mm&r=g\"},\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\"}]}}],\"wp:term\":[[{\"id\":2,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/category\\/image-sensor\\/\",\"name\":\"Image Sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"category\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\\/2\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/category\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?categories=2\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}],[{\"id\":4,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/def\\/\",\"name\":\"DEF\",\"slug\":\"def\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/4\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=4\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":6,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/image-sensor\\/\",\"name\":\"image sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/6\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=6\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}]]}},{\"id\":447,\"date\":\"2020-07-06T15:55:29\",\"date_gmt\":\"2020-07-06T15:55:29\",\"guid\":{\"rendered\":\"http:\\/\\/15.223.120.250\\/?p=447\"},\"modified\":\"2020-07-09T23:56:57\",\"modified_gmt\":\"2020-07-09T23:56:57\",\"slug\":\"2020-mid-year-review-looking-forward\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/2020\\/07\\/06\\/2020-mid-year-review-looking-forward\\/\",\"title\":{\"rendered\":\"Imaging &amp; Optical Sensing Subscriptions H1 2020\"},\"content\":{\"rendered\":\"\\n<h4>Mid-Year Review, Looking Forward<\\/h4>\\n\\n\\n\\n<p>Though H1 2020 was challenging to navigate, we&#8217;re happy to report our operations team has successfully delivered on its plan across our traditional image sensor subscription channels, including Device Essentials (DEF), Device Essentials Plus (DEP), and Circuit Analysis Report (CAR). Related content in progress and published to the TechInsights Platform includes: <\\/p>\\n\\n\\n\\n<p><strong>17<\\/strong> DEF reports from <strong>8<\\/strong> manufacturers on <strong>7<\\/strong> imaging\\/optical sensing applications<br><strong>7<\\/strong> DEP reports from <strong>4<\\/strong> manufacturers on <strong>3<\\/strong> imaging\\/optical sensing applications<br><strong>5<\\/strong> CAR reports from <strong>3<\\/strong> manufacturers on <strong>2<\\/strong> imaging\\/optical sensing applications<\\/p>\\n\\n\\n\\n<p>You&#8217;ll notice the emphasis on both imaging and optical sensing analysis targets.  While the overall technology vertical is ostensibly known as the &#8216;image sensors subscription&#8217; we continue the ongoing expansion of analysis targets to include multiple optical sensing applications. This extends to two new channels launched in H1: Process Flow Analysis (PFA) and Imager &amp; Optical Sensor Packaging and Integration Analysis (PKG). Additional details are presented in the <a href=\\\"https:\\/\\/tisapp-static-files.s3.us-east-2.amazonaws.com\\/Image_Sensor_Product_Brief.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Date=20200709T235555Z&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Expires=3600&amp;X-Amz-Credential=AKIAINK4YOIRQOSRROVA%2F20200709%2Fus-east-2%2Fs3%2Faws4_request&amp;X-Amz-Signature=fa6cb60c5c2570bad28db109858a33b8c9ef8d91f7dce8bce1301374b9af4373\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\">Product Overview<\\/a>. We continuously balance the mix of target applications to align with the intersection of high innovation, high revenue, and high volume applications, and to ensure our content library effectively covers emerging\\/disruptive applications.<\\/p>\\n\\n\\n\\n<p>Looking forward to the 2nd half of 2020 we expect continued coverage of smartphone\\/small-pixel stacked sensors, automotive imagers\\/sensors, 3D\\/ToF sensors and are looking forward to next generations of those platforms.  We&#8217;re also eagerly anticipating availability of the back-illuminated global shutter imagers on our procurement roadmap. Please do keep an eye on this space as we&#8217;ll regularly publish updates related to our product and content roadmaps. <\\/p>\\n\\n\\n\\n<p><\\/p>\\n\\n\\n\\n<p><br><\\/p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>Mid-Year Review, Looking Forward Though H1 2020 was challenging to navigate, we&#8217;re happy to report our operations team has successfully delivered on its plan across our traditional image sensor subscription channels, including Device Essentials (DEF), Device Essentials Plus (DEP), and Circuit Analysis Report (CAR). Related content in progress and published to the TechInsights Platform includes: [&hellip;]<\\/p>\\n\",\"protected\":false},\"author\":5,\"featured_media\":0,\"comment_status\":\"closed\",\"ping_status\":\"closed\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":[],\"categories\":[2],\"tags\":[3,4,5,6,7,8],\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/447\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/types\\/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/comments?post=447\"}],\"version-history\":[{\"count\":4,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/447\\/revisions\"}],\"predecessor-version\":[{\"id\":497,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/447\\/revisions\\/497\"}],\"wp:attachment\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/media?parent=447\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories?post=447\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags?post=447\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":5,\"name\":\"Ray Fontaine\",\"url\":\"\",\"description\":\"\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/author\\/rfontainetechinsights-com\\/\",\"slug\":\"rfontainetechinsights-com\",\"avatar_urls\":{\"24\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=24&d=mm&r=g\",\"48\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=48&d=mm&r=g\",\"96\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=96&d=mm&r=g\"},\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\"}]}}],\"wp:term\":[[{\"id\":2,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/category\\/image-sensor\\/\",\"name\":\"Image Sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"category\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\\/2\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/category\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?categories=2\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}],[{\"id\":3,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/car\\/\",\"name\":\"CAR\",\"slug\":\"car\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/3\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=3\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":4,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/def\\/\",\"name\":\"DEF\",\"slug\":\"def\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/4\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=4\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":5,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/dep\\/\",\"name\":\"DEP\",\"slug\":\"dep\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/5\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=5\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":6,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/image-sensor\\/\",\"name\":\"image sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/6\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=6\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":7,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/pfa\\/\",\"name\":\"PFA\",\"slug\":\"pfa\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/7\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=7\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":8,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/pkg\\/\",\"name\":\"PKG\",\"slug\":\"pkg\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/8\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=8\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}]]}}]");
            List<Post> allPosts = wordpressClient.getAllPosts(Optional.empty());
            assertNotEquals(Collections.emptyList(), allPosts);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }
    }

    @Test
    public void testWordpressClientImplGetAllPostsQueryParams() throws IOException, URISyntaxException {
        when(mockHttpClient.execute(any(ClassicHttpRequest.class), any(HttpClientResponseHandler.class))).thenReturn("[{\"id\":461,\"date\":\"2020-07-07T20:58:45\",\"date_gmt\":\"2020-07-07T20:58:45\",\"guid\":{\"rendered\":\"http:\\/\\/15.223.120.250\\/?p=461\"},\"modified\":\"2020-07-09T23:53:01\",\"modified_gmt\":\"2020-07-09T23:53:01\",\"slug\":\"device-essentials-def-channel-content-catalog\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/2020\\/07\\/07\\/device-essentials-def-channel-content-catalog\\/\",\"title\":{\"rendered\":\"Device Essentials (DEF) Channel Content Catalog\"},\"content\":{\"rendered\":\"\\n<p>TechInsights&#8217; DEF subscription channel back catalog now contains over 200 DEF reports on 31 manufacturers as listed\\/charted. The vendors aren&#8217;t targeted per se; these reports were published in response to a market need for competitive technical intelligence of successful and disruptive products.  Most parts for analysis are sourced from marquee products so our users can understand the enabling technologies of what&#8217;s inside winning products so it&#8217;s perhaps not surprising the profile of our content catalog is generally aligned with the leaders in market share. <\\/p>\\n\\n\\n\\n<div class=\\\"wp-block-group\\\"><div class=\\\"wp-block-group__inner-container\\\">\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-479x1024.png\\\" alt=\\\"DEF Catalog Target Vendor\\\" class=\\\"wp-image-484\\\" width=\\\"359\\\" height=\\\"768\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-479x1024.png 479w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-140x300.png 140w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6.png 481w\\\" sizes=\\\"(max-width: 359px) 100vw, 359px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Vendor<\\/strong><\\/figcaption><\\/figure><\\/div>\\n<\\/div><\\/div>\\n\\n\\n\\n<figure class=\\\"wp-block-image size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3.png\\\" alt=\\\"DEF Catalog Target Vendor\\\" class=\\\"wp-image-475\\\" width=\\\"580\\\" height=\\\"418\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3.png 878w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3-300x217.png 300w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3-768x555.png 768w\\\" sizes=\\\"(max-width: 580px) 100vw, 580px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Vendor<\\/strong><\\/figcaption><\\/figure>\\n\\n\\n\\n<p>The entirety of the scope of applications the DEF catalog covers is represented in list\\/chart form. The DEF subscription channel is entering its eighth year and indeed &#8216;what&#8217;s hot&#8217; has changed over that time.  The heavy presence of Japanese digital cameras, representing the 2nd overall ranking in our catalog, represents coverage of the great DSLR and mirrorless camera products of the past.  Smartphone\\/mobile\\/small pixel array imaging continues to hold its #1 spot and will likely continue to do so as these high volume sensors tend to leverage the most advanced manufacturing technologies.  One quarter of our DEF catalog is comprised of automotive, security, and machine vision applications and we do expect the contribution from these sub-sectors to increase going forward. 3D\\/depth sensing is the biggest mover of late and we do expect that application space to eventually take over #2 spot in our catalog.   <\\/p>\\n\\n\\n\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app.png\\\" alt=\\\"DEF Catalog Target Application\\\" class=\\\"wp-image-482\\\" width=\\\"445\\\" height=\\\"335\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app.png 593w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app-300x226.png 300w\\\" sizes=\\\"(max-width: 445px) 100vw, 445px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Application<\\/strong><\\/figcaption><\\/figure><\\/div>\\n\\n\\n\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1.png\\\" alt=\\\"DEF Catalog Target Application\\\" class=\\\"wp-image-483\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1.png 846w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1-300x219.png 300w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1-768x560.png 768w\\\" sizes=\\\"(max-width: 846px) 100vw, 846px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Application<\\/strong><br><\\/figcaption><\\/figure><\\/div>\\n\\n\\n\\n<p><\\/p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>TechInsights&#8217; DEF subscription channel back catalog now contains over 200 DEF reports on 31 manufacturers as listed\\/charted. The vendors aren&#8217;t targeted per se; these reports were published in response to a market need for competitive technical intelligence of successful and disruptive products. Most parts for analysis are sourced from marquee products so our users can [&hellip;]<\\/p>\\n\",\"protected\":false},\"author\":5,\"featured_media\":0,\"comment_status\":\"closed\",\"ping_status\":\"closed\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":[],\"categories\":[2],\"tags\":[4,6],\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/types\\/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/comments?post=461\"}],\"version-history\":[{\"count\":1,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\\/revisions\"}],\"predecessor-version\":[{\"id\":494,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\\/revisions\\/494\"}],\"wp:attachment\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/media?parent=461\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories?post=461\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags?post=461\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":5,\"name\":\"Ray Fontaine\",\"url\":\"\",\"description\":\"\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/author\\/rfontainetechinsights-com\\/\",\"slug\":\"rfontainetechinsights-com\",\"avatar_urls\":{\"24\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=24&d=mm&r=g\",\"48\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=48&d=mm&r=g\",\"96\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=96&d=mm&r=g\"},\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\"}]}}],\"wp:term\":[[{\"id\":2,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/category\\/image-sensor\\/\",\"name\":\"Image Sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"category\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\\/2\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/category\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?categories=2\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}],[{\"id\":4,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/def\\/\",\"name\":\"DEF\",\"slug\":\"def\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/4\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=4\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":6,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/image-sensor\\/\",\"name\":\"image sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/6\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=6\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}]]}},{\"id\":447,\"date\":\"2020-07-06T15:55:29\",\"date_gmt\":\"2020-07-06T15:55:29\",\"guid\":{\"rendered\":\"http:\\/\\/15.223.120.250\\/?p=447\"},\"modified\":\"2020-07-09T23:56:57\",\"modified_gmt\":\"2020-07-09T23:56:57\",\"slug\":\"2020-mid-year-review-looking-forward\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/2020\\/07\\/06\\/2020-mid-year-review-looking-forward\\/\",\"title\":{\"rendered\":\"Imaging &amp; Optical Sensing Subscriptions H1 2020\"},\"content\":{\"rendered\":\"\\n<h4>Mid-Year Review, Looking Forward<\\/h4>\\n\\n\\n\\n<p>Though H1 2020 was challenging to navigate, we&#8217;re happy to report our operations team has successfully delivered on its plan across our traditional image sensor subscription channels, including Device Essentials (DEF), Device Essentials Plus (DEP), and Circuit Analysis Report (CAR). Related content in progress and published to the TechInsights Platform includes: <\\/p>\\n\\n\\n\\n<p><strong>17<\\/strong> DEF reports from <strong>8<\\/strong> manufacturers on <strong>7<\\/strong> imaging\\/optical sensing applications<br><strong>7<\\/strong> DEP reports from <strong>4<\\/strong> manufacturers on <strong>3<\\/strong> imaging\\/optical sensing applications<br><strong>5<\\/strong> CAR reports from <strong>3<\\/strong> manufacturers on <strong>2<\\/strong> imaging\\/optical sensing applications<\\/p>\\n\\n\\n\\n<p>You&#8217;ll notice the emphasis on both imaging and optical sensing analysis targets.  While the overall technology vertical is ostensibly known as the &#8216;image sensors subscription&#8217; we continue the ongoing expansion of analysis targets to include multiple optical sensing applications. This extends to two new channels launched in H1: Process Flow Analysis (PFA) and Imager &amp; Optical Sensor Packaging and Integration Analysis (PKG). Additional details are presented in the <a href=\\\"https:\\/\\/tisapp-static-files.s3.us-east-2.amazonaws.com\\/Image_Sensor_Product_Brief.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Date=20200709T235555Z&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Expires=3600&amp;X-Amz-Credential=AKIAINK4YOIRQOSRROVA%2F20200709%2Fus-east-2%2Fs3%2Faws4_request&amp;X-Amz-Signature=fa6cb60c5c2570bad28db109858a33b8c9ef8d91f7dce8bce1301374b9af4373\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\">Product Overview<\\/a>. We continuously balance the mix of target applications to align with the intersection of high innovation, high revenue, and high volume applications, and to ensure our content library effectively covers emerging\\/disruptive applications.<\\/p>\\n\\n\\n\\n<p>Looking forward to the 2nd half of 2020 we expect continued coverage of smartphone\\/small-pixel stacked sensors, automotive imagers\\/sensors, 3D\\/ToF sensors and are looking forward to next generations of those platforms.  We&#8217;re also eagerly anticipating availability of the back-illuminated global shutter imagers on our procurement roadmap. Please do keep an eye on this space as we&#8217;ll regularly publish updates related to our product and content roadmaps. <\\/p>\\n\\n\\n\\n<p><\\/p>\\n\\n\\n\\n<p><br><\\/p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>Mid-Year Review, Looking Forward Though H1 2020 was challenging to navigate, we&#8217;re happy to report our operations team has successfully delivered on its plan across our traditional image sensor subscription channels, including Device Essentials (DEF), Device Essentials Plus (DEP), and Circuit Analysis Report (CAR). Related content in progress and published to the TechInsights Platform includes: [&hellip;]<\\/p>\\n\",\"protected\":false},\"author\":5,\"featured_media\":0,\"comment_status\":\"closed\",\"ping_status\":\"closed\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":[],\"categories\":[2],\"tags\":[3,4,5,6,7,8],\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/447\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/types\\/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/comments?post=447\"}],\"version-history\":[{\"count\":4,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/447\\/revisions\"}],\"predecessor-version\":[{\"id\":497,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/447\\/revisions\\/497\"}],\"wp:attachment\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/media?parent=447\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories?post=447\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags?post=447\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":5,\"name\":\"Ray Fontaine\",\"url\":\"\",\"description\":\"\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/author\\/rfontainetechinsights-com\\/\",\"slug\":\"rfontainetechinsights-com\",\"avatar_urls\":{\"24\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=24&d=mm&r=g\",\"48\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=48&d=mm&r=g\",\"96\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=96&d=mm&r=g\"},\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\"}]}}],\"wp:term\":[[{\"id\":2,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/category\\/image-sensor\\/\",\"name\":\"Image Sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"category\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\\/2\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/category\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?categories=2\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}],[{\"id\":3,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/car\\/\",\"name\":\"CAR\",\"slug\":\"car\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/3\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=3\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":4,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/def\\/\",\"name\":\"DEF\",\"slug\":\"def\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/4\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=4\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":5,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/dep\\/\",\"name\":\"DEP\",\"slug\":\"dep\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/5\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=5\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":6,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/image-sensor\\/\",\"name\":\"image sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/6\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=6\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":7,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/pfa\\/\",\"name\":\"PFA\",\"slug\":\"pfa\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/7\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=7\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":8,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/pkg\\/\",\"name\":\"PKG\",\"slug\":\"pkg\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/8\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=8\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}]]}}]");
        Map<String, String> queryParamsMap = new HashMap<>();
        queryParamsMap.put("categories", "2");
        List<Post> allPosts = wordpressClient.getAllPosts(Optional.of(queryParamsMap));
        assertNotEquals(Collections.emptyList(), allPosts);

    }

    @Test
    public void testWordpressClientImplGetPost() throws IOException, URISyntaxException {
        when(mockHttpClient.execute(any(ClassicHttpRequest.class), any(HttpClientResponseHandler.class))).thenReturn("{\"id\":461,\"date\":\"2020-07-07T20:58:45\",\"date_gmt\":\"2020-07-07T20:58:45\",\"guid\":{\"rendered\":\"http:\\/\\/15.223.120.250\\/?p=461\"},\"modified\":\"2020-07-09T23:53:01\",\"modified_gmt\":\"2020-07-09T23:53:01\",\"slug\":\"device-essentials-def-channel-content-catalog\",\"status\":\"publish\",\"type\":\"post\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/2020\\/07\\/07\\/device-essentials-def-channel-content-catalog\\/\",\"title\":{\"rendered\":\"Device Essentials (DEF) Channel Content Catalog\"},\"content\":{\"rendered\":\"\\n<p>TechInsights&#8217; DEF subscription channel back catalog now contains over 200 DEF reports on 31 manufacturers as listed\\/charted. The vendors aren&#8217;t targeted per se; these reports were published in response to a market need for competitive technical intelligence of successful and disruptive products.  Most parts for analysis are sourced from marquee products so our users can understand the enabling technologies of what&#8217;s inside winning products so it&#8217;s perhaps not surprising the profile of our content catalog is generally aligned with the leaders in market share. <\\/p>\\n\\n\\n\\n<div class=\\\"wp-block-group\\\"><div class=\\\"wp-block-group__inner-container\\\">\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-479x1024.png\\\" alt=\\\"DEF Catalog Target Vendor\\\" class=\\\"wp-image-484\\\" width=\\\"359\\\" height=\\\"768\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-479x1024.png 479w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6-140x300.png 140w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-6.png 481w\\\" sizes=\\\"(max-width: 359px) 100vw, 359px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Vendor<\\/strong><\\/figcaption><\\/figure><\\/div>\\n<\\/div><\\/div>\\n\\n\\n\\n<figure class=\\\"wp-block-image size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3.png\\\" alt=\\\"DEF Catalog Target Vendor\\\" class=\\\"wp-image-475\\\" width=\\\"580\\\" height=\\\"418\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3.png 878w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3-300x217.png 300w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-target-vendor-chart-3-768x555.png 768w\\\" sizes=\\\"(max-width: 580px) 100vw, 580px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Vendor<\\/strong><\\/figcaption><\\/figure>\\n\\n\\n\\n<p>The entirety of the scope of applications the DEF catalog covers is represented in list\\/chart form. The DEF subscription channel is entering its eighth year and indeed &#8216;what&#8217;s hot&#8217; has changed over that time.  The heavy presence of Japanese digital cameras, representing the 2nd overall ranking in our catalog, represents coverage of the great DSLR and mirrorless camera products of the past.  Smartphone\\/mobile\\/small pixel array imaging continues to hold its #1 spot and will likely continue to do so as these high volume sensors tend to leverage the most advanced manufacturing technologies.  One quarter of our DEF catalog is comprised of automotive, security, and machine vision applications and we do expect the contribution from these sub-sectors to increase going forward. 3D\\/depth sensing is the biggest mover of late and we do expect that application space to eventually take over #2 spot in our catalog.   <\\/p>\\n\\n\\n\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large is-resized\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app.png\\\" alt=\\\"DEF Catalog Target Application\\\" class=\\\"wp-image-482\\\" width=\\\"445\\\" height=\\\"335\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app.png 593w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/DEF-app-300x226.png 300w\\\" sizes=\\\"(max-width: 445px) 100vw, 445px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Application<\\/strong><\\/figcaption><\\/figure><\\/div>\\n\\n\\n\\n<div class=\\\"wp-block-image\\\"><figure class=\\\"aligncenter size-large\\\"><img src=\\\"http:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1.png\\\" alt=\\\"DEF Catalog Target Application\\\" class=\\\"wp-image-483\\\" srcset=\\\"https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1.png 846w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1-300x219.png 300w, https:\\/\\/blog.svc.techinsights.com\\/wp-content\\/uploads\\/2020\\/07\\/Application-1-768x560.png 768w\\\" sizes=\\\"(max-width: 846px) 100vw, 846px\\\" \\/><figcaption><strong>TechInsights DEF Catalog &#8211; Target Application<\\/strong><br><\\/figcaption><\\/figure><\\/div>\\n\\n\\n\\n<p><\\/p>\\n\",\"protected\":false},\"excerpt\":{\"rendered\":\"<p>TechInsights&#8217; DEF subscription channel back catalog now contains over 200 DEF reports on 31 manufacturers as listed\\/charted. The vendors aren&#8217;t targeted per se; these reports were published in response to a market need for competitive technical intelligence of successful and disruptive products. Most parts for analysis are sourced from marquee products so our users can [&hellip;]<\\/p>\\n\",\"protected\":false},\"author\":5,\"featured_media\":0,\"comment_status\":\"closed\",\"ping_status\":\"closed\",\"sticky\":false,\"template\":\"\",\"format\":\"standard\",\"meta\":[],\"categories\":[2],\"tags\":[4,6],\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/types\\/post\"}],\"author\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"replies\":[{\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/comments?post=461\"}],\"version-history\":[{\"count\":1,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\\/revisions\"}],\"predecessor-version\":[{\"id\":494,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts\\/461\\/revisions\\/494\"}],\"wp:attachment\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/media?parent=461\"}],\"wp:term\":[{\"taxonomy\":\"category\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories?post=461\"},{\"taxonomy\":\"post_tag\",\"embeddable\":true,\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags?post=461\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]},\"_embedded\":{\"author\":[{\"id\":5,\"name\":\"Ray Fontaine\",\"url\":\"\",\"description\":\"\",\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/author\\/rfontainetechinsights-com\\/\",\"slug\":\"rfontainetechinsights-com\",\"avatar_urls\":{\"24\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=24&d=mm&r=g\",\"48\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=48&d=mm&r=g\",\"96\":\"https:\\/\\/secure.gravatar.com\\/avatar\\/b8d4d31570279330cabf5d67181b5094?s=96&d=mm&r=g\"},\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\\/5\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/users\"}]}}],\"wp:term\":[[{\"id\":2,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/category\\/image-sensor\\/\",\"name\":\"Image Sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"category\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\\/2\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/categories\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/category\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?categories=2\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}],[{\"id\":4,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/def\\/\",\"name\":\"DEF\",\"slug\":\"def\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/4\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=4\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}},{\"id\":6,\"link\":\"https:\\/\\/blog.svc.techinsights.com\\/tag\\/image-sensor\\/\",\"name\":\"image sensor\",\"slug\":\"image-sensor\",\"taxonomy\":\"post_tag\",\"_links\":{\"self\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\\/6\"}],\"collection\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/tags\"}],\"about\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/taxonomies\\/post_tag\"}],\"wp:post_type\":[{\"href\":\"https:\\/\\/blog.svc.techinsights.com\\/wp-json\\/wp\\/v2\\/posts?tags=6\"}],\"curies\":[{\"name\":\"wp\",\"href\":\"https:\\/\\/api.w.org\\/{rel}\",\"templated\":true}]}}]]}}");

        String postId = "461";
        Post post = wordpressClient.getPost(postId);
        assertNotNull(post);
    }

    // TODO: fix save post methods and add getMedia methods and getPosts with pagination methods
/*
    @Test
    public void testWordpressClientImplSavePostExists() {
        try {
            when(wordpressClient.getPost(anyString())).thenReturn(mockPost);
            wordpressClient.savePost(mockPost);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Test
    public void testWordpressClientImplSavePostDoesntExist() {
        try {
            when(wordpressClient.getPost(anyString())).thenReturn(null);
            wordpressClient.savePost(mockPost);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
 */
}
